import{options as e}from"preact";const t={},n=[],o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function l(e,t){for(let n in t)e[n]=t[n];return e}function r(e){let t=e.parentNode;t&&t.removeChild(e)}const i={_catchError:function(e,t){let n,o;for(;t=t._parent;)if((n=t._component)&&!n._processingException)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(e)),o)return y(n._pendingError=n)}catch(t){e=t}throw e}};function c(e,t,n){let o,l={};for(o in t)"key"!==o&&"ref"!==o&&(l[o]=t[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(arguments[o]);if(null!=n&&(l.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===l[o]&&(l[o]=e.defaultProps[o]);return u(e,l,t&&t.key,t&&t.ref,null)}function u(e,t,n,o,l){const r={type:e,props:t,key:n,ref:o,_children:null,_parent:null,_depth:0,_dom:null,_nextDom:void 0,_component:null,constructor:void 0,_original:l};return null==l&&(r._original=r),i.vnode&&i.vnode(r),r}function s(e){return e.children}function _(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e._parent?p(e._parent,e._parent._children.indexOf(e)+1):null;let n;for(;t<e._children.length;t++)if(n=e._children[t],null!=n&&null!=n._dom)return n._dom;return"function"==typeof e.type?p(e):null}function a(e){let t=e._vnode,n=t._dom,o=e._parentDom;if(o){let r=[];const i=l({},t);i._original=i;let c=E(o,t,i,e._globalContext,void 0!==o.ownerSVGElement,null,r,null==n?p(t):n);S(r,t),c!=n&&function e(t){if(null!=(t=t._parent)&&null!=t._component){t._dom=t._component.base=null;for(let e=0;e<t._children.length;e++){let n=t._children[e];if(null!=n&&null!=n._dom){t._dom=t._component.base=n._dom;break}}return e(t)}}(t)}}_.prototype.setState=function(e,t){let n;n=this._nextState!==this.state?this._nextState:this._nextState=l({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&l(n,e),null!=e&&this._vnode&&(t&&this._renderCallbacks.push(t),y(this))},_.prototype.forceUpdate=function(e){this._vnode&&(this._force=!0,e&&this._renderCallbacks.push(e),y(this))},_.prototype.render=s;let d=[],f=0;const h="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;let m;function y(e){(!e._dirty&&(e._dirty=!0)&&d.push(e)&&!f++||m!==i.debounceRendering)&&(m=i.debounceRendering,(m||h)(g))}function g(){let e;for(;f=d.length;)e=d.sort((e,t)=>e._vnode._depth-t._vnode._depth),d=[],e.some(e=>{e._dirty&&a(e)})}function v(e,o,l,i,c,s,_,a,d){let f,h,m,y,g,v,k,x=l&&l._children||n,b=x.length;if(a==t&&(a=null!=s?s[0]:b?p(l,0):null),f=0,o._children=function e(t,n,o){if(null==o&&(o=[]),null==t||"boolean"==typeof t)n&&o.push(n(null));else if(Array.isArray(t))for(let l=0;l<t.length;l++)e(t[l],n,o);else o.push(n?n("string"==typeof t||"number"==typeof t?u(null,t,null,null,t):null!=t._dom||null!=t._component?u(t.type,t.props,t.key,null,t._original):t):t);return o}(o._children,n=>{if(null!=n){if(n._parent=o,n._depth=o._depth+1,m=x[f],null===m||m&&n.key==m.key&&n.type===m.type)x[f]=void 0;else for(h=0;h<b;h++){if(m=x[h],m&&n.key==m.key&&n.type===m.type){x[h]=void 0;break}m=null}if(m=m||t,y=E(e,n,m,i,c,s,_,a,d),(h=n.ref)&&m.ref!=h&&(k||(k=[]),m.ref&&k.push(m.ref,null,n),k.push(h,n._component||y,n)),null!=y){let t;if(null==v&&(v=y),void 0!==n._nextDom)t=n._nextDom,n._nextDom=void 0;else if(s==m||y!=a||null==y.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(y),t=null;else{for(g=a,h=0;(g=g.nextSibling)&&h<b;h+=2)if(g==y)break e;e.insertBefore(y,a),t=a}"option"==o.type&&(e.value="")}a=void 0!==t?t:y.nextSibling,"function"==typeof o.type&&(o._nextDom=a)}else a&&m._dom==a&&a.parentNode!=e&&(a=p(m))}return f++,n}),o._dom=v,null!=s&&"function"!=typeof o.type)for(f=s.length;f--;)null!=s[f]&&r(s[f]);for(f=b;f--;)null!=x[f]&&w(x[f],x[f]);if(k)for(f=0;f<k.length;f++)C(k[f],k[++f],k[++f])}function k(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===o.test(t)?n+"px":null==n?"":n}function x(e,t,n,o,l){let r,i,c;if(l?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t)if(r=e.style,"string"==typeof n)r.cssText=n;else{if("string"==typeof o&&(r.cssText="",o=null),o)for(let e in o)n&&e in n||k(r,e,"");if(n)for(let e in n)o&&n[e]===o[e]||k(r,e,n[e])}else"o"===t[0]&&"n"===t[1]?(i=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(o||e.addEventListener(t,b,i),(e._listeners||(e._listeners={}))[t]=n):e.removeEventListener(t,b,i)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!l&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function b(e){this._listeners[e.type](i.event?i.event(e):e)}function E(e,o,r,c,u,p,a,d,f){let h,m=o.type;if(void 0!==o.constructor)return null;(h=i._diff)&&h(o);try{e:if("function"==typeof m){let t,n,y,g,k,x,b=o.props;h=m.contextType;let E=h&&c[h._id],S=h?E?E.props.value:h._defaultValue:c;if(r._component?(t=o._component=r._component,x=t._processingException=t._pendingError):("prototype"in m&&m.prototype.render?o._component=t=new m(b,S):(o._component=t=new _(b,S),t.constructor=m,t.render=D),E&&E.sub(t),t.props=b,t.state||(t.state={}),t.context=S,t._globalContext=c,n=t._dirty=!0,t._renderCallbacks=[]),null==t._nextState&&(t._nextState=t.state),null!=m.getDerivedStateFromProps&&(t._nextState==t.state&&(t._nextState=l({},t._nextState)),l(t._nextState,m.getDerivedStateFromProps(b,t._nextState))),y=t.props,g=t.state,n)null==m.getDerivedStateFromProps&&null!=t.componentWillMount&&t.componentWillMount(),null!=t.componentDidMount&&t._renderCallbacks.push(t.componentDidMount);else{if(null==m.getDerivedStateFromProps&&b!==y&&null!=t.componentWillReceiveProps&&t.componentWillReceiveProps(b,S),!t._force&&null!=t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(b,t._nextState,S)||o._original===r._original&&!t._processingException){for(t.props=b,t.state=t._nextState,o._original!==r._original&&(t._dirty=!1),t._vnode=o,o._dom=r._dom,o._children=r._children,t._renderCallbacks.length&&a.push(t),h=0;h<o._children.length;h++)o._children[h]&&(o._children[h]._parent=o);break e}null!=t.componentWillUpdate&&t.componentWillUpdate(b,t._nextState,S),null!=t.componentDidUpdate&&t._renderCallbacks.push(()=>{t.componentDidUpdate(y,g,k)})}t.context=S,t.props=b,t.state=t._nextState,(h=i._render)&&h(o),t._dirty=!1,t._vnode=o,t._parentDom=e,h=t.render(t.props,t.state,t.context),o._children=null!=h&&h.type==s&&null==h.key?h.props.children:Array.isArray(h)?h:[h],null!=t.getChildContext&&(c=l(l({},c),t.getChildContext())),n||null==t.getSnapshotBeforeUpdate||(k=t.getSnapshotBeforeUpdate(y,g)),v(e,o,r,c,u,p,a,d,f),t.base=o._dom,t._renderCallbacks.length&&a.push(t),x&&(t._pendingError=t._processingException=null),t._force=!1}else null==p&&o._original===r._original?(o._children=r._children,o._dom=r._dom):o._dom=function(e,o,l,r,i,c,u,s){let _,p=l.props,a=o.props;if(i="svg"===o.type||i,null!=c)for(_=0;_<c.length;_++){const t=c[_];if(null!=t&&((null===o.type?3===t.nodeType:t.localName===o.type)||e==t)){e=t,c[_]=null;break}}if(null==e){if(null===o.type)return document.createTextNode(a);e=i?document.createElementNS("http://www.w3.org/2000/svg",o.type):document.createElement(o.type,a.is&&{is:a.is}),c=null,s=!1}if(null===o.type)p!==a&&e.data!=a&&(e.data=a);else{null!=c&&(c=n.slice.call(e.childNodes)),p=l.props||t;let d=p.dangerouslySetInnerHTML,f=a.dangerouslySetInnerHTML;if(!s){if(p===t){p={};for(let t=0;t<e.attributes.length;t++)p[e.attributes[t].name]=e.attributes[t].value}(f||d)&&(f&&d&&f.__html==d.__html||(e.innerHTML=f&&f.__html||""))}!function(e,t,n,o,l){let r;for(r in n)"children"===r||"key"===r||r in t||x(e,r,null,n[r],o);for(r in t)l&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||x(e,r,t[r],n[r],o)}(e,a,p,i,s),f?o._children=[]:(o._children=o.props.children,v(e,o,l,r,"foreignObject"!==o.type&&i,c,u,t,s)),s||("value"in a&&void 0!==(_=a.value)&&_!==e.value&&x(e,"value",_,p.value,!1),"checked"in a&&void 0!==(_=a.checked)&&_!==e.checked&&x(e,"checked",_,p.checked,!1))}return e}(r._dom,o,r,c,u,p,a,f);(h=i.diffed)&&h(o)}catch(e){o._original=null,i._catchError(e,o,r)}return o._dom}function S(e,t){i._commit&&i._commit(t,e),e.some(t=>{try{e=t._renderCallbacks,t._renderCallbacks=[],e.some(e=>{e.call(t)})}catch(e){i._catchError(e,t._vnode)}})}function C(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){i._catchError(e,n)}}function w(e,t,n){let o,l;if(i.unmount&&i.unmount(e),(o=e.ref)&&(o.current&&o.current!==e._dom||C(o,null,t)),n||"function"==typeof e.type||(n=null!=(l=e._dom)),e._dom=e._nextDom=void 0,null!=(o=e._component)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){i._catchError(e,t)}o.base=o._parentDom=null}if(o=e._children)for(let e=0;e<o.length;e++)o[e]&&w(o[e],t,n);null!=l&&r(l)}function D(e,t,n){return this.constructor(e,n)}const N=t;let P,T,A,U=0,F=[],L=e._render,M=e.diffed,W=e._commit,H=e.unmount;function I(){F.some(t=>{if(t._parentDom)try{t.__hooks._pendingEffects.forEach(q),t.__hooks._pendingEffects.forEach(B),t.__hooks._pendingEffects=[]}catch(n){return t.__hooks._pendingEffects=[],e._catchError(n,t._vnode),!0}}),F=[]}function R(e){const t=()=>{clearTimeout(n),cancelAnimationFrame(o),setTimeout(e)},n=setTimeout(t,100);let o;"undefined"!=typeof window&&(o=requestAnimationFrame(t))}function q(e){e._cleanup&&e._cleanup()}function B(e){const t=e._value();"function"==typeof t&&(e._cleanup=t)}e._render=e=>{L&&L(e),T=e._component,P=0,T.__hooks&&(T.__hooks._pendingEffects.forEach(q),T.__hooks._pendingEffects.forEach(B),T.__hooks._pendingEffects=[])},e.diffed=t=>{M&&M(t);const n=t._component;if(!n)return;const o=n.__hooks;o&&o._pendingEffects.length&&(1!==F.push(n)&&A===e.requestAnimationFrame||(A=e.requestAnimationFrame,(A||R)(I)))},e._commit=(t,n)=>{n.some(t=>{try{t._renderCallbacks.forEach(q),t._renderCallbacks=t._renderCallbacks.filter(e=>!e._value||B(e))}catch(o){n.some(e=>{e._renderCallbacks&&(e._renderCallbacks=[])}),n=[],e._catchError(o,t._vnode)}}),W&&W(t,n)},e.unmount=t=>{H&&H(t);const n=t._component;if(!n)return;const o=n.__hooks;if(o)try{o._list.forEach(e=>e._cleanup&&e._cleanup())}catch(t){e._catchError(t,n._vnode)}},function(e,o,l){i._root&&i._root(e,o);let r=void 0===N,u=r?null:o._children;e=c(s,null,[e]);let _=[];E(o,o._children=e,u||t,t,void 0!==o.ownerSVGElement,u?null:n.slice.call(o.childNodes),_,t,r),S(_,e)}(c(()=>{const[t,n]=function(t,n,o){const l=function(t,n){e._hook&&e._hook(T,t,U||2),U=0;const o=T.__hooks||(T.__hooks={_list:[],_pendingEffects:[]});return t>=o._list.length&&o._list.push({}),o._list[t]}(P++);return l._component||(l._component=T,l._value=[0,e=>{const t=l._value[0]+1;l._value[0]!==t&&(l._value[0]=t,l._component.setState({}))}]),l._value}();return c("div",null,t,c("button",{onClick:n},"Increment"))},null),window.preact_root);
